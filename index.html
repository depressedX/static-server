<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test</title>
    <script type="text/javascript"
            src="https://webapi.amap.com/maps?v=1.4.11&key=9aab6b6fff994d6e7d3f187cf5422fd6"></script>
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <style>#container {
        max-width: 500px;
        width: 100%;
        height: 300px;
    }  </style>
</head>
<body>
<div id="container"></div>
<script>
    window.onLoad = function () {
        var map = new AMap.Map('container');
        
        map.plugin('AMap.Geolocation', function() {
            var geolocation = new AMap.Geolocation({
                // 是否使用高精度定位，默认：true
                enableHighAccuracy: true,
                // 设置定位超时时间，默认：无穷大
                timeout: 10000,
                // 定位按钮的停靠位置的偏移量，默认：Pixel(10, 20)
                buttonOffset: new AMap.Pixel(10, 20),
                //  定位成功后调整地图视野范围使定位位置及精度范围视野内可见，默认：false
                zoomToAccuracy: true,
                //  定位按钮的排放位置,  RB表示右下
                buttonPosition: 'RB'
            })

            geolocation.getCurrentPosition()
            geolocation.watchPosition()
            AMap.event.addListener(geolocation, 'complete', onComplete)
            AMap.event.addListener(geolocation, 'error', onError)

            function onComplete (data) {
                // data是具体的定位信息
                console.log(data)
            }

            function onError (data) {
                // 定位出错
                console.log('err')
            }
        })
    }
    var url = 'https://webapi.amap.com/maps?v=1.4.11&key=9aab6b6fff994d6e7d3f187cf5422fd6&callback=onLoad';
    var jsapi = document.createElement('script');
    jsapi.charset = 'utf-8';
    jsapi.src = url;
    document.head.appendChild(jsapi);
    
    
    
    
</script>
</body>
</html>